<mat-sidenav-container [hasBackdrop]="false" >
  <mat-sidenav #sidenav [mode]="'side'" opened >
    <div class="navnetic">
      <i-tabler name="brand-telegram"></i-tabler>
      <span>夏夏子导航页</span>
    </div>
    <mat-nav-list>
        <mat-list-item *ngFor="let item of data">
            <div class="categorySidebar" (click)="scrollToCategory(item.category_id)">
              <img class="sider-category-log" [src]="svgPath(item.category_icon)">
              <span class="sider-category">{{ item.category_name }}</span>
            </div>
        </mat-list-item>
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar>
      <button class="iconButton" matTooltip="切换侧边栏" (click)="toggleSidebar()">
        <i-tabler [name]="isSidebarCollapsed ? 'layout-sidebar-left-collapse' : 'layout-sidebar-left-expand'"></i-tabler>
      </button>

      <!-- 右边的内容 -->
      <div class="toolbar-right">

        <div class="toolbar-search">
          <mat-icon matPrefix>search</mat-icon>
          <form [formGroup]="searchForm">
            <input type="text" formControlName="searchKeyword" placeholder="搜索" (blur)="clearSearchTerm()"/>
          </form>
        </div>

        <div class="edButtons">
          <button class="iconButton" matTooltip="切换页面" (click)="toggleComponent()">
            <i-tabler name="menu-2"></i-tabler>
          </button>
          <!-- 根据 currentComponent 渲染添加分类按钮 -->
          <ng-container *ngIf="currentComponent === 'manage'">
            <button class="iconButton" (click)="openCategoryDialog()" matTooltip="添加分类">
              <i-tabler name="plus"></i-tabler>
            </button>
          </ng-container>
        </div>
      </div>
    </mat-toolbar>


    <!-- 搜索结果 -->
    <div class="searchResult" *ngIf="searchForm.get('searchKeyword')?.value && data.length > 0" >
      <ng-container *ngFor="let item of searchData">
        <a class="searchResult-content" [href]="item.href" target="_blank">
          <span class="searchResult-name">{{ item.name }}</span>
          <span class="searchResult-desc">{{ item.description }}</span>
        </a>
      </ng-container>
      <span class="searchResult-count">共搜到 {{ searchData.length }} 条结果</span>
    </div>

    <!-- 根据 currentComponent 渲染不同的组件 -->
    <ng-container>
      <ng-container *ngIf="currentComponent === 'pages'">
        <app-pages class="mt-16"></app-pages>
      </ng-container>
      <ng-container *ngIf="currentComponent === 'manage'">
        <app-manage class="mt-16"></app-manage>
      </ng-container>
    </ng-container>

  </mat-sidenav-content>
</mat-sidenav-container>
